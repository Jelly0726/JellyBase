apply plugin: 'com.android.application'
apply plugin: 'org.greenrobot.greendao'
//ç”¨äºæ–¹ä¾¿è°ƒè¯•æ€§èƒ½é—®é¢˜çš„æ‰“å°æ’ä»¶ã€‚ç»™è®¿æ³•åŠ ä¸Š@DebugLogï¼Œå°±èƒ½è¾“å‡ºè¯¥æ–¹æ³•çš„è°ƒç”¨å‚æ•°ï¼Œä»¥åŠæ‰§è¡Œæ—¶é—´
apply plugin: 'com.jakewharton.hugo'
android {
    compileSdkVersion 26
    buildToolsVersion "26.0.2"
    defaultConfig {
        applicationId "com.jelly.jellybase"
        minSdkVersion 18
        targetSdkVersion 26
        versionCode 2
        versionName "1.0.2" //versionName åŒ…å«"F"è¡¨ç¤ºå¼ºåˆ¶æ›´æ–°
        testInstrumentationRunner "android.support.test.runner.AndroidJUnitRunner"
        multiDexEnabled true
        //vectorDrawables.useSupportLibrary = true//ä½¿ä½ çš„appä½¿ç”¨çŸ¢é‡å›¾support libraryï¼›
        // android {compileOptions.encoding = "GBK"}  //å¢åŠ çš„å†…å®¹ï¼Œå¯ä»¥è§£å†³éƒ¨ç½²åˆ°è®¾å¤‡ä¸Šæ±‰å­—æ˜¾ç¤ºä¹±ç çš„é—®é¢˜

        ndk { //é«˜å¾·åœ°å›¾è®¾ç½®æ”¯æŒçš„SOåº“æ¶æ„ï¼ˆå¼€å‘è€…å¯ä»¥æ ¹æ®éœ€è¦ï¼Œé€‰æ‹©ä¸€ä¸ªæˆ–å¤šä¸ªå¹³å°çš„soï¼‰
            abiFilters "armeabi", "armeabi-v7a", "x86",'mips'

            //æå…‰æ¨é€é€‰æ‹©è¦æ·»åŠ çš„å¯¹åº”cpuç±»å‹çš„.soåº“ã€‚
            //abiFilters 'armeabi', 'armeabi-v7a', 'armeabi-v8a','x86', 'x86_64', 'mips', 'mips64'
            // è¿˜å¯ä»¥æ·»åŠ  'x86', 'x86_64', 'mips', 'mips64'
        }
        //æå…‰æ¨é€
        manifestPlaceholders = [
                JPUSH_PKGNAME : applicationId,
                JPUSH_APPKEY : "ä½ çš„appkey", //JPushä¸Šæ³¨å†Œçš„åŒ…åå¯¹åº”çš„appkey.
                JPUSH_CHANNEL : "developer-default", //æš‚æ—¶å¡«å†™é»˜è®¤å€¼å³å¯.
        ]
        buildConfigField "boolean", "IS_MUST_LOGIN", "false"//æ˜¯å¦å¿…é¡»ç™»å½•
        //Android Studio å†…ç½®ä¸€ä¸ªåä¸º Vector Asset Studio çš„å·¥å…·ï¼Œåœ¨ä½ç‰ˆæœ¬SDKä¸Šç¼–è¯‘APKæœŸé—´ï¼Œ
        // é’ˆå¯¹VectorDrawableè„šæœ¬è‡ªåŠ¨ç”Ÿæˆä¸€ç»„PNGä½å›¾èµ„æºBitmapDrawableï¼Œå–ä»£çŸ¢é‡å›¾å½¢ï¼ˆåœ¨5.0åŠä»¥åçš„æ‰‹æœºä¸Šè¿è¡Œæ—¶ä¼šæ­£å¸¸å¼•ç”¨VectorDrawableï¼‰ã€‚
        vectorDrawables.generatedDensities = ['hdpi','xxhdpi']
        vectorDrawables.useSupportLibrary = true
        /*
        å…¼å®¹åŒ…åœ¨çŸ¢é‡èµ„æºå¼•ç”¨ã€ä»£ç è°ƒç”¨æ—¶ï¼Œå­˜åœ¨ä¸€å®šé™åˆ¶
        åœ¨ ImageView ç­‰å¼•ç”¨ VectorDrawable èµ„æºæ—¶ï¼Œéœ€è¦ä½¿ç”¨app:srcCompatå–ä»£android:src
        ä»£ç ä¸­ä½¿ç”¨setImageResource()æŒ‡å®šèµ„æº id æ—¶ï¼Œæ— éœ€æ›´æ”¹ä»£ç 
        å°† VectorDrawable ç”¨äº View èƒŒæ™¯æ—¶ï¼Œéœ€è¦é€šè¿‡ä»¥ä¸‹ä»£ç è®¾å®šï¼š
        Resources resources = context.getResources(Resources, int, Theme);
        Theme theme = context.getTheme();
        Drawable drawable = VectorDrawableCompat.create(resources, R.drawable.vector_drawable, theme);
        view.setBackground(drawable);
        ä»£ç ä¸­éœ€è¦è¿›è¡ŒDrawableçš„å®ç°ç±»å‹è½¬æ¢æ—¶ï¼Œå¯ä½¿ç”¨ä»¥ä¸‹ä»£ç æ®µæ‰§è¡Œï¼š

        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.LOLLIPOP) {
            VectorDrawable vectorDrawable =  (VectorDrawable) drawable;
        } else {
            BitmapDrawable bitmapDrawable = (BitmapDrawable) drawable;
        }

        åˆ›å»ºå¥½çš„ VectorDrawable åŠ¨ç”»èµ„æºï¼Œéœ€è¦é€šè¿‡ä»£ç æ–¹å¼åŠ è½½åˆ° View å®¹å™¨å†…ï¼Œå¹¶æŒ‡å®šæ‰§è¡ŒåŠ¨ç”»

        ä½¿ç”¨åŸç”Ÿæ”¯æŒçš„ä»£ç è®¾å®šï¼ˆ5.0 LOLLIPOP, API 21ï¼‰
        ImageView imageView = (ImageView) findViewById(R.id.imageView);
        AnimatedVectorDrawable vectorDrawable = (AnimatedVectorDrawable) getResources().getDrawable(AnimatedVectorDrawableRes, Theme);
        imageView.setImageDrawable(vectorDrawable);
        vectorDrawable.start();
        ä½¿ç”¨ Support Library æ—¶çš„åŠ¨ç”»è®¾ç½®
        çŸ¢é‡åŠ¨ç”»è¦æ±‚æœ€ä½SDKä¸ºAndroid 3.0ï¼Œå¹¶ä¸”ä¸æ”¯æŒ<path>è·¯å¾„ç±»å‹çš„å˜æ¢

        ImageView imageView = (ImageView) findViewById(R.id.imageView);
        AnimatedVectorDrawableCompat drawableCompat = AnimatedVectorDrawableCompat.create(context, AnimatedVectorDrawableRes);
        imageView.setImageDrawable(drawableCompat);
        drawableCompat.start();
        * */
    }
    signingConfigs {
        release  {
            storeFile file("Jelly.jks")
            storePassword "1207qw"
            keyAlias "jelly"
            keyPassword "1207qw"
            //v1SigningEnabled false
            // v2SigningEnabled false
        }
        debug  {
            storeFile file("Jelly.jks")
            storePassword "1207qw"
            keyAlias "jelly"
            keyPassword "1207qw"
            //v1SigningEnabled false
            // v2SigningEnabled false
        }
    }
    buildTypes {
        debug {
            buildConfigField "boolean", "LOG_DEBUG", "true"//æ˜¯å¦è¾“å‡ºLOGä¿¡æ¯
            signingConfig signingConfigs.debug
            // ç§»é™¤æ— ç”¨çš„resourceæ–‡ä»¶
            shrinkResources false
            minifyEnabled false
            zipAlignEnabled false
            proguardFiles 'proguard-project.txt'
            //è‡ªå®šä¹‰å¯¼å‡ºapkæ–‡ä»¶å
            applicationVariants.all { variant ->
                variant.outputs.all { output ->  // each æ”¹ä¸º all
                    def fileName = "V${variant.versionName}_debug.apk"
                    def outFile = output.outputFile
                    if (outFile != null && outFile.name.endsWith('.apk')) {
                        outputFileName = fileName  //  output.outputFile æ”¹ä¸º outputFileName
                    }
                }
            }
        }
        release {
            // ä¸æ˜¾ç¤ºLog
            buildConfigField "boolean", "LOG_DEBUG", "false"
            signingConfig signingConfigs.release
            // ç§»é™¤æ— ç”¨çš„resourceæ–‡ä»¶
            shrinkResources true
            minifyEnabled true
            zipAlignEnabled true
            proguardFiles 'proguard-project.txt'
            //è‡ªå®šä¹‰å¯¼å‡ºapkæ–‡ä»¶å
            applicationVariants.all { variant ->
                variant.outputs.all { output ->  // each æ”¹ä¸º all
                    def fileName = "V${variant.versionName}_release.apk"
                    def outFile = output.outputFile
                    if (outFile != null && outFile.name.endsWith('.apk')) {
                        outputFileName = fileName  //  output.outputFile æ”¹ä¸º outputFileName
                    }
                }
            }
        }
    }
    packagingOptions {
        exclude 'META-INF/DEPENDENCIES'
        exclude 'META-INF/NOTICE'
        exclude 'META-INF/LICENSE'
        exclude 'META-INF/LICENSE.txt'
        exclude 'META-INF/NOTICE.txt'

        doNotStrip "*/armeabi/*.so"
        doNotStrip "*/armeabi-v7a/*.so"
        doNotStrip "*/x86/*.so"
        doNotStrip "*/mips/*.so"
    }
//    dexOptions {
//        //jumboMode= true
//        incremental true
//        javaMaxHeapSize "4g"
//    }
    lintOptions {
        checkReleaseBuilds false
        // Or, if you prefer, you can continue to check for errors in release builds,
        // but continue the build even when errors are found:
        abortOnError false
    }
    aaptOptions {
        //é‡‡ç”¨ä½ç‰ˆæœ¬æ„å»ºç”ŸæˆPNGå›¾ç‰‡çš„å…¼å®¹æ–¹å¼ï¼›
        //additionalParameters "--no-version-vectors"
    }
}
//greendaoé…ç½®
greendao {
    schemaVersion 1//ç‰ˆæœ¬å·ï¼Œå‡çº§æ—¶å¯é…ç½®
    daoPackage'systemdb' //åŒ…å
    targetGenDir'src/main/java' //ç”Ÿæˆç›®å½•
}
//å¯¼å…¥æ™ºèƒ½æ›´æ–° SDK çš„ AAR æ–‡ä»¶
repositories {
    flatDir {
        dirs 'libs'
    }
}
dependencies {

    //ç™¾åº¦æ™ºèƒ½æ›´æ–° SDK çš„ AAR æ–‡ä»¶
    compile(name: 'autoupdatesdk-release', ext: 'aar')
    compile fileTree(include: ['*.jar'], dir: 'libs')
    androidTestCompile('com.android.support.test.espresso:espresso-core:2.2.2', {
        exclude group: 'com.android.support', module: 'support-annotations'
    })
    compile 'com.android.support:appcompat-v7:26.1.0'//VectorDrawableéœ€è¦Support Library 23.2+
    compile 'com.android.support.constraint:constraint-layout:1.0.2'
    testCompile 'junit:junit:4.12'

    //æ”¯æŒç™¾åˆ†æ¯”é€‚é…
    compile 'com.android.support:percent:22.2.0'

    //recyclerview
    compile 'com.android.support:design:26.1.0'

    //butterknifeæ³¨è§£å¼ç»‘å®šid
    compile 'com.jakewharton:butterknife:8.8.1'
    annotationProcessor 'com.jakewharton:butterknife-compiler:8.8.1'
    compile 'com.android.support:recyclerview-v7:26.1.0'
    compile 'com.android.support:cardview-v7:26.1.0'

    //å¤šè¿›ç¨‹æ•°æ®å…±äº«SharedPreferences
    compile 'net.grandcentrix.tray:tray:0.12.0'

    //
    compile 'xiaofei.library:hermes-eventbus:0.3.0'

    //okhttp
    compile 'com.squareup.okhttp3:okhttp:3.8.1'
    //RxLifecycleåº“é€šè¿‡ç»‘å®šç”Ÿå‘½å‘¨æœŸçš„æ–¹å¼ï¼Œæ¥è§£å†³Retrofit2å†…å­˜æ³„æ¼çš„é—®é¢˜ã€‚
    compile 'com.trello.rxlifecycle2:rxlifecycle-components:2.2.1'
    //Retrofit
    compile 'com.squareup.retrofit2:retrofit:2.2.0'
    //Retrofit2æ‰€éœ€è¦çš„åŒ…
    compile 'com.squareup.retrofit2:converter-gson:2.2.0'
    //ConverterFactoryçš„Gsonä¾èµ–åŒ…
    compile 'com.squareup.retrofit2:converter-scalars:2.2.0'
    //ConverterFactoryçš„Stringä¾èµ–åŒ…
    compile 'com.squareup.retrofit2:adapter-rxjava2:2.2.0'
    //æ·»åŠ Retrofitå¯¹Rxjavaçš„æ”¯æŒ
    compile 'com.squareup.okhttp3:logging-interceptor:3.8.1'
    //RxJava
    compile 'io.reactivex.rxjava2:rxandroid:2.0.1'
    compile 'io.reactivex.rxjava2:rxjava:2.1.5'
    //JSONè§£æ
    compile 'com.alibaba:fastjson:1.1.55.android'

    //æ—¶é—´å’Œåœ°å€é€‰æ‹©å™¨
    compile('cn.qqtheme.framework:WheelPicker:1.5.5') {
        exclude group: 'com.android.support'
    }

    //è‡ªåŠ¨é€‚é…
    compile 'com.zhy:autolayout:1.4.5'

    //é«˜å¾·åœ°å›¾soåŠjar

    //3Dåœ°å›¾

    //compile 'com.amap.api:3dmap:latest.integration'

    //å®šä½åŠŸèƒ½
    compile 'com.amap.api:location:latest.integration'

    //compile 'com.amap.api:location:3.6.1'

    //æœç´¢åŠŸèƒ½
    compile 'com.amap.api:search:latest.integration'

    //compile 'com.amap.api:search:5.5.0'

    //å¯¼èˆª
    compile 'com.amap.api:navi-3dmap:latest.integration'

    //compile 'com.amap.api:navi-3dmap:5.5.0'

    //æå…‰æ¨é€
    compile 'cn.jiguang.sdk:jpush:3.1.3'
    compile 'cn.jiguang.sdk:jcore:1.2.1'

    //sqliteæ¡†æ¶greendao
    compile 'org.greenrobot:greendao:3.2.2'

    // æ•°æ®åº“åŠ å¯†æ—¶æ·»åŠ 

    //compile 'net.zetetic:android-database-sqlcipher:3.5.1'

    // ä½¿ç”¨æ•°æ®åº“å‡çº§è¾…åŠ©GreenDaoUpgradeHelperæ—¶æ·»åŠ 

    //compile 'com.github.yuweiguocn:GreenDaoUpgradeHelper:v1.2.0'

    //multidex
    compile 'com.android.support:multidex:1.0.1'

    //glideå›¾ç‰‡åŠ è½½åº“
    compile 'com.github.bumptech.glide:glide:3.7.0'

    //å¾®ä¿¡æ”¯ä»˜
    compile 'com.tencent.mm.opensdk:wechat-sdk-android-without-mta:+'

    //QQã€å¾®ä¿¡ã€å¾®åšç™»é™†å’Œåˆ†äº«
    compile('com.github.arvinljw:SocialHelper:v1.0.5') {
        exclude group: 'com.android.support'
    }

    //å¾®åš

    //compile 'com.sina.weibo.sdk:core:4.1.0:openDefaultRelease@aar'

    //æ˜Ÿçº§è¯„ä»·
    compile 'com.github.ome450901:SimpleRatingBar:1.3.4'

    //å›¾ç‰‡é€‰æ‹©
    compile 'com.yanzhenjie:album:2.0.2'

    //SystemBarä¸€ä½“åŒ–ï¼ŒçŠ¶æ€æ 
    compile 'com.yanzhenjie:sofia:1.0.4'

    //ProgressDialog
    compile 'com.github.maning0303:MNProgressHUD:V1.0.2'

    //æ£€æŸ¥ç‰ˆæœ¬
    compile 'com.allenliu.versionchecklib:library:2.0.5'

    //Androidå¹³å°ä¸‹çš„å¯Œæ–‡æœ¬è§£æå™¨ï¼Œæ”¯æŒHtmlå’ŒMarkdown
    compile 'com.zzhoujay.richtext:richtext:3.0.4'

    //Androidå›¾è¡¨è§†å›¾/å›¾å½¢è§†å›¾åº“
    compile 'com.github.PhilJay:MPAndroidChart:v3.0.3'
    compile files('libs/tbs_sdk_thirdapp_v3.5.0.1004_43500.jar')

    //RecyclerViewä¾§æ»‘èœå•
    compile 'com.yanzhenjie:recyclerview-swipe:1.1.4'

    //æƒé™ç”³è¯·
    compile 'com.yanzhenjie:permission:1.1.2'

    //JavaåŠ å¯†è§£å¯†æ‰€éœ€å·¥å…·
    compile 'org.bouncycastle:bcprov-jdk15on:1.59'

    //è§†é¢‘æ’­æ”¾å™¨gsyVideoPlayer
    compile('com.shuyu:gsyVideoPlayer-java:5.0.0-beta') {
        exclude group: 'com.android.support'
    }
    compile('com.shuyu:gsyVideoPlayer-ex_so:5.0.0-beta') {
        exclude group: 'com.android.support'
    }
    implementation files('libs/zxing-core-3.3.1.jar')
    implementation files('libs/commons-codec-1.11.jar')
    implementation files('libs/commons-io-2.6.jar')

    //ç™¾åº¦æ–‡å­—è¯†åˆ«(èº«ä»½è¯ã€é“¶è¡Œå¡ç­‰)
    implementation files('libs/ocr-sdk.jar')
    compile project(path: ':ocr_ui')
    implementation files('libs/tmassistantsdk_selfupdate-jce_3.0.1_33_20180123101008.jar')
}
